apiVersion: v1
kind: ConfigMap
metadata:
  name: gateway-config
  namespace: saas-platform
  labels:
    app: gateway
data:
  # Server Configuration
  server.port: "8080"
  server.env: "production"
  server.log_level: "info"
  server.shutdown_timeout: "30s"

  # Database Configuration
  postgres.host: "postgres.saas-platform.svc.cluster.local"
  postgres.port: "5432"
  postgres.database: "gateway"
  postgres.max_connections: "25"
  postgres.max_idle_connections: "5"
  postgres.connection_max_lifetime: "5m"
  postgres.ssl_mode: "require"

  # Redis Configuration
  redis.host: "redis.saas-platform.svc.cluster.local"
  redis.port: "6379"
  redis.db: "0"
  redis.max_retries: "3"
  redis.pool_size: "10"
  redis.min_idle_connections: "2"
  redis.connection_timeout: "5s"
  redis.read_timeout: "3s"
  redis.write_timeout: "3s"

  # Kafka Configuration
  kafka.brokers: "kafka-0.kafka-headless.saas-platform.svc.cluster.local:9092,kafka-1.kafka-headless.saas-platform.svc.cluster.local:9092,kafka-2.kafka-headless.saas-platform.svc.cluster.local:9092"
  kafka.topic.usage: "usage-events"
  kafka.producer.acks: "all"
  kafka.producer.compression: "snappy"
  kafka.producer.max_retries: "3"
  kafka.producer.timeout: "10s"

  # Rate Limiting Configuration
  ratelimit.requests_per_minute: "1000"
  ratelimit.burst_size: "100"
  ratelimit.data_transfer_mb_per_day: "10000"
  ratelimit.api_calls_per_day: "100000"
  ratelimit.storage_gb: "100"

  # Cache Configuration
  cache.enabled: "true"
  cache.ttl.api_keys: "300s"
  cache.ttl.organizations: "600s"
  cache.ttl.rate_limits: "60s"
  cache.ttl.metrics: "120s"

  # CORS Configuration
  cors.allowed_origins: "https://dashboard.company.com,https://admin.company.com"
  cors.allowed_methods: "GET,POST,PUT,DELETE,OPTIONS"
  cors.allowed_headers: "Content-Type,Authorization,X-API-Key,X-Organization-ID"
  cors.max_age: "3600"

  # Metrics Configuration
  metrics.enabled: "true"
  metrics.path: "/metrics"

  # Health Check Configuration
  health.path: "/health"
  health.ready_path: "/ready"
